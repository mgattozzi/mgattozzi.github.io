<!DOCTYPE html>
<html ⚡ lang="en">
  <head>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700' rel='stylesheet' type='text/css'>
  <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>How do I convert a &amp;str to a String in Rust?</title>
  <meta name="description" content="This is the first in a whole series of blog posts to answer the simplequestion “How do I X in Rust?” Many times as a user coming into theRust language there ...">

  <link rel="canonical" href="https://mgattozzi.github.io/2016/05/26/how-do-i-str-string.html">
  <link rel="alternate" type="application/rss+xml" title="Barely Functional" href="https://mgattozzi.github.io/feed.xml">

  <script type="application/ld+json">
  
{
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": "https://mgattozzi.github.io/2016/05/26/how-do-i-str-string.html",
  "headline": "How do I convert a &amp;str to a String in Rust?",
  "datePublished": "2016-05-26T00:00:00-04:00",
  "dateModified": "2016-05-26T00:00:00-04:00",
  "description": "This is the first in a whole series of blog posts to answer the simplequestion “How do I X in Rust?” Many times as a user coming into theRust language there ...",
  "author": {
    "@type": "Person",
    "name": "Michael Gattozzi"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Barely Functional",
    "logo": {
      "@type": "ImageObject",
      "url": "https://mgattozzi.github.iomgattozzi.github.io/assets/images/logo.png",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "https://mgattozzi.github.iomgattozzi.github.io/assets/images/logo.png",
    "height": 60,
    "width": 60
  }
}

  </script>
  
  <style amp-custom>
  
  /**
 * Syntax highlighting styles
 */
.highlight {
  background: #fff; }
  .highlighter-rouge .highlight {
    background: #eef; }
  .highlight .c {
    color: #998;
    font-style: italic; }
  .highlight .err {
    color: #a61717;
    background-color: #e3d2d2; }
  .highlight .k {
    font-weight: bold; }
  .highlight .o {
    font-weight: bold; }
  .highlight .cm {
    color: #998;
    font-style: italic; }
  .highlight .cp {
    color: #999;
    font-weight: bold; }
  .highlight .c1 {
    color: #998;
    font-style: italic; }
  .highlight .cs {
    color: #999;
    font-weight: bold;
    font-style: italic; }
  .highlight .gd {
    color: #000;
    background-color: #fdd; }
  .highlight .gd .x {
    color: #000;
    background-color: #faa; }
  .highlight .ge {
    font-style: italic; }
  .highlight .gr {
    color: #a00; }
  .highlight .gh {
    color: #999; }
  .highlight .gi {
    color: #000;
    background-color: #dfd; }
  .highlight .gi .x {
    color: #000;
    background-color: #afa; }
  .highlight .go {
    color: #888; }
  .highlight .gp {
    color: #555; }
  .highlight .gs {
    font-weight: bold; }
  .highlight .gu {
    color: #aaa; }
  .highlight .gt {
    color: #a00; }
  .highlight .kc {
    font-weight: bold; }
  .highlight .kd {
    font-weight: bold; }
  .highlight .kp {
    font-weight: bold; }
  .highlight .kr {
    font-weight: bold; }
  .highlight .kt {
    color: #458;
    font-weight: bold; }
  .highlight .m {
    color: #099; }
  .highlight .s {
    color: #d14; }
  .highlight .na {
    color: #008080; }
  .highlight .nb {
    color: #0086B3; }
  .highlight .nc {
    color: #458;
    font-weight: bold; }
  .highlight .no {
    color: #008080; }
  .highlight .ni {
    color: #800080; }
  .highlight .ne {
    color: #900;
    font-weight: bold; }
  .highlight .nf {
    color: #900;
    font-weight: bold; }
  .highlight .nn {
    color: #555; }
  .highlight .nt {
    color: #000080; }
  .highlight .nv {
    color: #008080; }
  .highlight .ow {
    font-weight: bold; }
  .highlight .w {
    color: #bbb; }
  .highlight .mf {
    color: #099; }
  .highlight .mh {
    color: #099; }
  .highlight .mi {
    color: #099; }
  .highlight .mo {
    color: #099; }
  .highlight .sb {
    color: #d14; }
  .highlight .sc {
    color: #d14; }
  .highlight .sd {
    color: #d14; }
  .highlight .s2 {
    color: #d14; }
  .highlight .se {
    color: #d14; }
  .highlight .sh {
    color: #d14; }
  .highlight .si {
    color: #d14; }
  .highlight .sx {
    color: #d14; }
  .highlight .sr {
    color: #009926; }
  .highlight .s1 {
    color: #d14; }
  .highlight .ss {
    color: #990073; }
  .highlight .bp {
    color: #999; }
  .highlight .vc {
    color: #008080; }
  .highlight .vg {
    color: #008080; }
  .highlight .vi {
    color: #008080; }
  .highlight .il {
    color: #099; }

.icon > svg {
  display: inline-block;
  width: 16px;
  height: 16px;
  vertical-align: middle; }
  .icon > svg path {
    fill: #828282; }

amp-img {
  background-color: grey; }

.cf:after {
  content: "";
  display: table;
  clear: both; }

main {
  display: block; }

body {
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-font-feature-settings: "liga=1, dlig=1";
  -ms-font-feature-settings: "liga", "dlig";
  -webkit-font-feature-settings: "liga", "dlig";
  -o-font-feature-settings: "liga", "dlig";
  font-feature-settings: "liga", "dlig"; }

.site-header {
  position: relative;
  width: 100%;
  max-width: 700px;
  margin: 16px auto 0 auto;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }
  @media only screen and (max-width: 800px) {
    .site-header {
      padding: 0 16px; } }
  .site-header .page-links {
    display: block;
    position: absolute;
    top: 10px;
    right: 16px;
    font-weight: 200;
    font-style: normal;
    font-size: 18px;
    line-height: 30px; }
    .site-header .page-links a {
      text-decoration: none;
      color: #999999; }
      .site-header .page-links a:hover {
        color: #333333; }

.blog-header {
  width: 100%;
  max-width: 700px;
  margin: 0 auto;
  position: relative;
  padding: 0;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }
  .blog-header .blog-title {
    margin-bottom: 8px;
    font-size: 50px;
    font-weight: 700;
    letter-spacing: -2px;
    outline: 0;
    line-height: 50px;
    word-break: break-word;
    color: #333333; }
  .blog-header .blog-description {
    font-size: 28px;
    margin: 0 0 20px;
    padding: 0;
    line-height: 1.2;
    color: #666666;
    font-weight: 300; }

.content {
  width: 100%;
  max-width: 700px;
  margin: 25px auto 0 auto;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }
  @media only screen and (max-width: 800px) {
    .content {
      padding: 0 16px; } }
  .content article {
    padding: 20px 0;
    border-bottom: 1px solid #f2f2f0; }
    .content article:last-child {
      border-bottom: 0px; }
    .content article .post-title {
      letter-spacing: -0.02em;
      font-weight: 700;
      font-style: normal;
      display: block;
      font-size: 36px;
      line-height: 1.15;
      margin: 0 0; }
      .content article .post-title a {
        text-decoration: none;
        color: #333332; }
        .content article .post-title a:hover {
          text-decoration: none; }
    .content article .post-excerpt {
      letter-spacing: -0.02em;
      font-weight: 300;
      font-style: normal;
      font-size: 20px;
      line-height: 1.59;
      color: #666665; }
    .content article .post-meta {
      font-size: 14px;
      color: #b3b3b1;
      line-height: 30px; }
      .content article .post-meta a {
        color: #b3b3b1;
        text-decoration: none; }
        .content article .post-meta a:hover {
          text-decoration: underline; }

.post-template .content {
  max-width: 700px; }

.index-headline {
  border-top: 1px solid #dededc;
  margin: 0;
  padding: 16px 0; }
  .index-headline span {
    color: #b3b3b1;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 1px; }

.pagination {
  text-align: center;
  padding: 16px 0 0;
  font-size: 12px; }
  .pagination a {
    color: #999999;
    text-decoration: none; }
    .pagination a:hover {
      color: #333333; }

.site-footer {
  margin: 0 auto;
  padding: 48px 0;
  width: 100%;
  max-width: 700px;
  font-size: 12px;
  text-align: center;
  color: #999999;
  line-height: 17.6px; }
  .site-footer a {
    color: #666666;
    text-decoration: none; }
    .site-footer a:hover {
      color: #333333; }

.post .post-meta {
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
.post .post-title {
  font-weight: 700;
  font-style: normal;
  letter-spacing: -0.04em;
  font-size: 50px;
  line-height: 1.1;
  color: #333332;
  margin-bottom: 50px; }
.post .author-image {
  background-image: url(/mgattozzi.github.io/assets/images/author.jpg);
  display: inline-block;
  width: 30px;
  height: 30px;
  line-height: 30px;
  margin-right: 8px;
  margin-bottom: -10px;
  float: left;
  background-size: cover;
  border-radius: 100%;
  text-indent: -9999px; }
.post .post-meta-text {
  color: #b3b3b1;
  letter-spacing: -0.02em;
  font-weight: 400;
  font-style: normal;
  font-size: 14px;
  overflow: hidden;
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif;
  white-space: nowrap;
  text-overflow: ellipsis; }
.post .post-content {
  width: 100%;
  font-family: Georgia, Cambria, "Times New Roman", Times, "Lora", serif;
  color: #333333; }
  .post .post-content h1, .post .post-content h2, .post .post-content h3 {
    font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
  .post .post-content h3, .post .post-content h4, .post .post-content h5, .post .post-content h6 {
    letter-spacing: -0.02em;
    font-weight: 700;
    font-style: normal;
    font-size: 24px;
    line-height: 1.3;
    margin-top: 50px;
    margin-bottom: 0px;
    font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
  .post .post-content h3 {
    font-size: 36px; }
  .post .post-content h2, .post .post-content h1 {
    letter-spacing: -0.02em;
    font-weight: 700;
    font-style: normal;
    font-size: 42px;
    line-height: 1.2;
    margin-top: 50px;
    margin-bottom: 0px; }
  .post .post-content p {
    font-weight: 400;
    font-style: normal;
    font-size: 22px;
    line-height: 1.59;
    letter-spacing: -.002em;
    margin-top: 30px;
    margin-bottom: 0;
    color: #333333;
    -webkit-hyphens: auto;
    -moz-hyphens: auto;
    hyphens: auto; }
  .post .post-content a {
    color: #333333;
    text-decoration: underline; }
  .post .post-content amp-img, .post .post-content amp-youtube {
    margin-top: 30px; }
  .post .post-content figure {
    margin: 0;
    padding: 0 0 30px; }
  .post .post-content figcaption {
    font-weight: 400;
    font-style: italic;
    font-size: 16px;
    line-height: 1.3;
    color: #666665;
    outline: 0;
    z-index: 300;
    text-align: center; }
  .post .post-content hr {
    border: 0;
    padding: 0;
    display: block;
    width: 15%;
    margin: 30px auto;
    border: 0px solid #dddddd;
    border-top: 1px solid #dddddd; }
  .post .post-content blockquote {
    margin: 0 0 30px;
    margin-left: -26px;
    border-left: 3px solid #57ad68;
    padding-left: 20px; }
    .post .post-content blockquote p {
      letter-spacing: 0.01rem;
      font-weight: 400;
      mborder-left: 3px solid #57ad68;
      mpadding-left: 20px;
      mmargin-left: -26px;
      padding-bottom: 3px; }
  .post .post-content ul, .post .post-content ol {
    padding: 0 0 30px;
    margin: 0; }
  .post .post-content li {
    padding: 0;
    font-weight: 400;
    font-style: normal;
    font-size: 23px;
    line-height: 30px;
    margin-left: 30px;
    margin-bottom: 12px;
    padding-top: 2px; }
    .post .post-content li p {
      padding: 0 0 1.618rem; }
  .post .post-content ol li {
    list-style-type: decimal; }
.post .bottom-teaser {
  padding: 50px 0 0 0;
  font-family: "Helvetica Neue", "Open Sans", Arial, Helvetica, sans-serif; }
  .post .bottom-teaser hr {
    border: 0;
    padding: 0;
    display: block;
    width: 15%;
    margin: 16px 0 16px 100px;
    border: 0px solid #dddddd;
    border-top: 1px solid #dddddd; }
  .post .bottom-teaser .isLeft {
    float: left;
    width: 47%;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }
    @media only screen and (max-width: 800px) {
      .post .bottom-teaser .isLeft {
        width: 100%;
        padding-bottom: 32px; } }
    .post .bottom-teaser .isLeft .bio {
      margin-top: 18px;
      margin-bottom: 18px; }
    .post .bottom-teaser .isLeft .username {
      margin-left: 4px;
      margin-right: 18px;
      margin-bottom: 18px; }
    .post .bottom-teaser .isLeft .index-headline {
      padding-bottom: 32px; }
    .post .bottom-teaser .isLeft a {
      color: black;
      text-decoration: none; }
      .post .bottom-teaser .isLeft a:hover {
        color: #333333;
        text-decoration: underline; }
    .post .bottom-teaser .isLeft .author-image {
      display: block;
      width: 80px;
      height: 80px;
      float: left;
      background-size: cover;
      border-radius: 100%;
      text-indent: -9999px; }
    .post .bottom-teaser .isLeft h4 {
      font-size: 18px;
      line-height: 1.1;
      font-weight: 700;
      padding: 0;
      margin: 0;
      padding-left: 100px; }
    .post .bottom-teaser .isLeft p {
      font-size: 14px;
      line-height: 1.3;
      font-weight: 400;
      padding: 0;
      margin: 0;
      padding-left: 100px; }
      .post .bottom-teaser .isLeft p.published {
        color: #999999; }
  .post .bottom-teaser .isRight {
    float: right;
    width: 47%;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }
    @media only screen and (max-width: 800px) {
      .post .bottom-teaser .isRight {
        width: 100%; } }
    .post .bottom-teaser .isRight .index-headline {
      padding-bottom: 32px; }
    .post .bottom-teaser .isRight .site-footer {
      margin: 0;
      padding: 0;
      color: #333333;
      text-align: left;
      font-size: 14px;
      line-height: 1.3;
      color: #999999; }
      .post .bottom-teaser .isRight .site-footer a {
        color: #333333;
        text-decoration: none; }
        .post .bottom-teaser .isRight .site-footer a:hover {
          text-decoration: underline; }
      .post .bottom-teaser .isRight .site-footer .poweredby {
        display: block;
        padding-bottom: 18px;
        font-weight: 700;
        color: #333333; }

.share {
  text-align: right;
  padding: 20px 0 0; }
  .share a {
    text-decoration: none;
    color: #bbbbbb;
    padding-left: 12px; }
    .share a .hidden {
      display: none; }
    .share a:hover {
      color: #333333; }

pre,
code {
  font-size: 15px;
  border: 1px solid #e8e8e8;
  border-radius: 3px;
  background-color: #eeeeff; }

code {
  padding: 1px 5px; }

pre {
  padding: 8px 12px;
  overflow-x: scroll; }
  pre > code {
    border: 0;
    padding-right: 0;
    padding-left: 0; }

  </style>



  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
</head>

  <body>
    <header class="site-header">
  <a href="/" class="logo"><span class="logo"><amp-img src="/mgattozzi.github.io/assets/images/logo.png" width="64" height="64" /></span></a>

  <div class="page-links">
    <a class="page-link" href="/">Home</a>
    
      
      • <a class="page-link" href="/about/">About</a>
      
    
      
      • <a class="page-link" href="/archive/">Archive</a>
      
    
      
    
      
    
  </div>
</header>


    <main class="content" role="main">
  <article class="post">
    <div class="post-meta">
      <h1 class="post-title">How do I convert a &str to a String in Rust?</h1>
    </div>

    <section class="post-content">
      <a name="topofpage"></a>
      <p>This is the first in a whole series of blog posts to answer the simple
question “How do I X in Rust?” Many times as a user coming into the
Rust language there are growing pains and some things that seem
intuitive after using the language for a while aren’t for a new user.
This is aimed at those new users, however even an experienced Rust user
might learn a new trick or two.</p>

<p>With that in mind let’s jump right in!</p>

<h2 id="whats-the-difference-between-str-and-string">What’s the difference between &amp;str and String?</h2>

<p>Before we talk about conversion it’ll help to know what
a <a href="https://doc.rust-lang.org/std/primitive.str.html">&amp;str</a> and
a <a href="https://doc.rust-lang.org/std/string/struct.String.html">String</a> are and why we’d want to convert from a &amp;str to a String.
A &amp;str is an immutable reference to a String. This means you can’t change
the string at all or manipulate it in any way. However if you have
a String you have the option to do that as well as having some methods
that &amp;str doesn’t have to do text manipulation. You can look at the
methods available to the different data types that are linked above for
what you can do exactly with each type. Generally speaking:</p>

<ul>
  <li>You want &amp;str if you don’t want to change the string</li>
  <li>You want String if you want to change the string or need ownership of
the data</li>
</ul>

<p>Sometimes you’ll get a &amp;str type from a method, but need a String. The
following methods we’ll discuss will show you how to convert to a String
from an &amp;str.</p>

<p><em>Thanks to <a href="https://twitter.com/LeoUnglaub/status/735942665569767424">@LeoUnglaub</a> for suggesting to add this section</em></p>

<h2 id="converting-a-str-to-a-string">Converting a &amp;str to a String</h2>

<p>Surprisingly, there are quite a few ways to do this and depending on what
you’re trying to do one of the methods laid out below will be more
appropriate.</p>

<h3 id="tostring">to_string()</h3>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">new_string</span> <span class="o">=</span> <span class="s">"Hello World!"</span><span class="nf">.to_string</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
</div>

<p>to_string() turns an &amp;str into a String. Back before <a href="https://github.com/rust-lang/rust/pull/32586">this pr in version
1.9</a> of the compiler this
was actually slower than the next method I’ll be showing you. It went
through crazy amounts of machinery to turn it into a String whereas the
newer compiler version optimized this for &amp;str -&gt; String making it
equivalent to the next method speed wise. This machinery is all the code
that can parse the data type and turn it into a String. It should be
noted that this and the following methods are copying data under the
hood so that you can have ownership of the String. There is no speed
difference between to_string(), to_owned(), and String::from().</p>

<p>There was a question on the subreddit as to whether this means .to_owned() would be deprecated. <a href="https://www.reddit.com/r/rust/comments/4l71qw/how_do_i_convert_a_str_to_string_the_beginning_in/d3mc6jy?context=3">/u/Roaneno answers it well here.</a></p>

<h3 id="toowned">to_owned()</h3>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">new_string</span> <span class="o">=</span> <span class="s">"Hello World!"</span><span class="nf">.to_owned</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Since the &amp;str is an immutable reference to a String using to_owned()
turns it into a String you own and can do things with! This is now the
same as to_string(), but was the preferred way prior to 1.9 .to_owned()
is used for other data types to promote an immutable reference into a
data type you own.</p>

<h3 id="stringfrom">String::from()</h3>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">new_string</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>When you are using to_string() in any compiler after 1.9 you’re actually
using this method. to_string() ends up being syntactic sugar for it.
You hand an &amp;str into the from method and from there it constructs
a String type for you to use.</p>

<h3 id="stringpushstr">String::push_str()</h3>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">new_string</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span> <span class="c">//Create an empty string</span>
    <span class="n">new_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">);</span>
    <span class="n">new_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="s">" World!"</span><span class="p">);</span>
    <span class="nd">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span> <span class="n">new_string</span><span class="p">);</span> <span class="c">//Prints Hello World!</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Since a String is a growable data type you can add to it by pushing &amp;str
into it. While this is a bit verbose for the example I gave above you
could use it to concatenate a variety of &amp;str into one String that you
can then manipulate to do other things.</p>

<h3 id="format">format!()</h3>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">world_var</span><span class="o">=</span> <span class="s">"world"</span><span class="p">;</span>
    <span class="c">//Becomes "Hello World!"</span>
    <span class="k">let</span> <span class="n">new_string</span> <span class="o">=</span> <span class="nd">format!</span><span class="p">(</span><span class="s">"Hello {}!"</span><span class="p">,</span> <span class="n">world</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>You can also use the format!() macro in order to do some more complex
formatting with &amp;str as input. It’s like println!() but instead of
outputting to stdout it instead returns a String. This is simpler to use
than .push_str() if you know what text you want in your string and don’t
want lines of code just to set it up. Given the above example with
.push_str() it would be:</p>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">world_var</span> <span class="o">=</span> <span class="s">"world"</span><span class="p">;</span>
    <span class="k">let</span> <span class="k">mut</span> <span class="n">new_string</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">new</span><span class="p">();</span>
    <span class="n">new_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="s">"Hello "</span><span class="p">);</span>
    <span class="n">new_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="n">world_var</span><span class="p">);</span>
    <span class="n">new_string</span><span class="nf">.push_str</span><span class="p">(</span><span class="s">"!"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>
</div>

<p>This is way more verbose than is needed. That’s why a case like this is
more suited to format!() to have the code be more expressive and clean
looking. However, there is a cost. Remember that crazy machinery I was
talking about for .to_string()? That was using this under the hood and
as such was less efficient. Use this method with caution if speed is
a concern.</p>

<p><em>Tip courtesy of <a href="https://www.reddit.com/r/rust/comments/4l71qw/how_do_i_convert_a_str_to_string_the_beginning_in/d3kxqhk">/u/MrJillHace</a></em></p>

<h3 id="into">into()</h3>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">new_string</span> <span class="o">=</span> <span class="s">"Hello world!"</span><span class="nf">.into</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
</div>

<p>This is a less well known way to do it, but since &amp;str implements
Into it has this method available to it. Think of it as saying I’m
turning this into that. It’s a trait for conversions which you can find
<a href="https://doc.rust-lang.org/std/convert/trait.Into.html">here in the docs</a> if you want to read more about it. While it’s a
little less clear as to what it’s doing you have this method available
to you as well. It’s not guaranteed to be fast according to the
definition of the trait, just that you are guaranteed the conversion
itself. String::from() implements the From trait which implements Into.
You’re probably better off using that method rather than this, but
you’re more than free to do so.</p>

<p><em>Tip courtesy of
<a href="https://twitter.com/nj_snav_lin/status/735923508467924997?s=09">@nj_snav_lin</a> and <a href="https://www.reddit.com/r/rust/comments/4l71qw/how_do_i_convert_a_str_to_string_the_beginning_in/d3lgmdi">/u/cramert</a></em></p>

<h2 id="whats-the-idiomatic-rust-way">What’s the idiomatic Rust way?</h2>

<p>Most code you’ll see will use .to_owned() or String::from() since that
was faster than .to_string(). Now though any of those 3 will be the most
common way to do conversions. This is one of those things that has so
many ways to do things that there’s no one standard for the community.
I personally think .to_string() or String::from() are good choices since
they emphasize what they’re doing more so than .to_owned() or any of the
other methods. Others might disagree, but at the end of the day it’s
your code so choose the method that’s best suited for what you’re doing.</p>

<h2 id="we-have-to-go-back-marty">We have to go back Marty!</h2>

<p>Sometimes you’ll need to go back from a String to &amp;str. All you’ll have
to do is:</p>

<div class="language-rust highlighter-rouge"><pre class="highlight"><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">my_string</span> <span class="o">=</span> <span class="nn">String</span><span class="p">::</span><span class="nf">from</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">);</span>
    <span class="k">let</span> <span class="n">my_immutable_string</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">my_string</span><span class="p">;</span> <span class="c">//This is a &amp;String type</span>
    <span class="k">let</span> <span class="n">my_str</span><span class="p">:</span> <span class="o">&amp;</span><span class="nb">str</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">my_string</span><span class="p">;</span> <span class="c">//This is an &amp;str type</span>
<span class="p">}</span>
</code></pre>
</div>

<p>&amp;String can be used anywhere there is a need for &amp;str. It automatically
turns into it if the method calls for it.</p>

<p>Simple enough right? If you want to know why you can read about <a href="https://doc.rust-lang.org/book/deref-coercions.html">auto deref here</a>.</p>

<p><em>Thanks to <a href="https://twitter.com/k0pernicus/status/736154776166109185">@k0pernicus</a> for suggesting to add this to the post</em></p>

<h2 id="conclusion">Conclusion</h2>

<p>Above are the various ways you can make a String from a &amp;str and each
serves a different purpose:</p>

<ul>
  <li>.to_string() if you want a simple conversion and show you’re making
a String</li>
  <li>.to_owned() if you want a simple conversion and to show you’re taking
ownership of it.</li>
  <li>String::from() a more explicit way to say what you’re doing</li>
  <li>String::push_str() if you need to append to a String</li>
  <li>format!() if you have predefined text that you wanted formatted in
a specific way and don’t care about the speed cost</li>
  <li>.into() if you want a simple conversion and don’t care about the
ambiguity of it</li>
</ul>

<p>You can also easily go from a String to a &amp;str:</p>

<ul>
  <li>&amp;String types turn into &amp;str if the method call needs it</li>
  <li>let my_str: &amp;str = &amp;my_string; if you want to explicitly specify
a &amp;str type</li>
</ul>

<p>If you have a burning question that you want answered but just can’t
seem to find the answer you need, shoot me an email at
mgattozzi@gmail.com and I’ll write a post to answer your question! No
question is stupid. Chances are if you’re having trouble with it so is
someone else so ask away!</p>

<p>If you’re a more experienced Rust user and want to help with the wording
or give suggestions send me a PR or reach out to me and I’ll include
changes if they’re good. You’ll also get credit for your
contributions of course!</p>

    </section>
    <footer class="post-footer">
      <section class="share">
        <a class="icon" href="http://twitter.com/share?text=How+do+I+convert+a+%26str+to+a+String+in+Rust%3F&amp;url=https://mgattozzi.github.io/2016/05/26/how-do-i-str-string" target="_blank">
          Share on
          
<span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span>


        </a>
      </section>
    </footer>
    <div class="bottom-teaser cf">
      <div class="isLeft">
        <h5 class="index-headline featured"><span>Written by</span></h5>
        <section class="author">
          <div class="author-image"></div>
          <h4>Michael Gattozzi</h4>
          <p class="bio">I get paid to make lights change patterns on a screen and I can't imagine doing anything else. Lover of all things vim, functional, and unix. Avid gamer with a penchant to buy more games than I have time for.
</p>

          <p>
            <span>
              
                <a href="https://github.com/mgattozzi"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">mgattozzi</span></a>

              
            </span>

            <span>
              
                
<a href="https://twitter.com/mgattozzi"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">mgattozzi</span></a>


              
            </span>
          </p>
          <hr>
          <p class="published">Published <time datetime="2016-05-26 00:00">26 May 2016</time></p>
        </section>
      </div>
      
      <div class="isRight">
        <h5 class="index-headline featured"><span>Supported by</span></h5>
        <footer class="site-footer">
          <section class="poweredby">Proudly published with <a href="http://jekyllrb.com"> Jekyll</a> and <a href="https://github.com/ageitgey/amplify">Amplify</a></section>
          <a class="subscribe" href="/feed.xml"> <span class="tooltip"> <i class="fa fa-rss"></i> You should subscribe to my feed.</span></a>
          <div class="inner">
            <section class="copyright">All content copyright <a href="mailto:mgattozzi@gmail.com">Michael Gattozzi</a> &copy; 2016<br>All rights reserved.</section>
          </div>
        </footer>
      </div>
    </div>
  </article>
</main>

  </body>
</html>
