<p>Over the past few weeks I’ve had the great pleasure of working on my own shell
in the Rust language. It’s been exciting to work on and I’ve learned a lot
about the language including monadic error handling (something I wasn’t forced
to use in Haskell if I didn’t want too) as well as the concept of ownership
(which can be quite frustrating at first)</p>

<p>Rust has forced to me to think both functionally and iteratively in order to
solve my problems. It’s compiler forces one to make sure all types being passed
around are correct and all possible errors programmed for at compile time. An
excellent article on this can be found
<a href="https://ruudvanasseldonk.com/2015/06/17/exceptional-results-error-handling-in-csharp-and-rust">here</a>.</p>

<p>Rust is a beautiful language to work with and allows it’s functions to be
called in other languages such as ruby, javascript or python if speed is needed
in certain applications. This is all through the Foreign Function Interface
(FFI). What’s even cooler is that you can write functions in those and other
languages and call them in Rust. It makes it easier to build web applications
or involve them in scripts or writing memory unsafe functions in C within the
code.</p>

<p>One of Rust’s main draws is that it allocates and deallocates all of the memory
for you on the stack and heap. It inserts those calls into the code at compile
time, eliminating the need for things like a garbage collector. It’s meant to
be a fast lower level language with higher level abstractions. It’s easy to
pick up and I highly reccomend taking a look now that it has reached 1.0.0
status.</p>

<p>Here’s a look at some of the main.rs file you can find <a href="https://github.com/mgattozzi/Rusty">here</a>. Note this is ahead
of the master branch at this time and does have some problems with it, however
it does present a good look at what the rust language has to offer.</p>

<div class="highlight"><pre><code class="language-rust" data-lang="rust"><span class="err">#</span><span class="o">!</span><span class="p">[</span><span class="n">allow</span><span class="p">(</span><span class="n">unused_imports</span><span class="p">)]</span>
<span class="k">extern</span> <span class="n">crate</span> <span class="n">rusty</span><span class="p">;</span>
<span class="kn">use</span> <span class="n">rusty</span><span class="o">::</span><span class="n">utils</span><span class="o">::*</span><span class="p">;</span>
<span class="kn">use</span> <span class="n">rusty</span><span class="o">::</span><span class="n">core</span><span class="o">::*</span><span class="p">;</span>
<span class="kn">use</span> <span class="n">std</span><span class="o">::</span><span class="n">path</span><span class="o">::</span><span class="nb">Path</span><span class="p">;</span>
<span class="kn">use</span> <span class="n">std</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">stdin</span><span class="p">;</span>
<span class="kn">use</span> <span class="n">std</span><span class="o">::</span><span class="n">env</span><span class="p">;</span>

<span class="k">fn</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//Initialization occurs here </span>
    <span class="kd">let</span> <span class="n">temp</span>  <span class="o">=</span> <span class="n">env</span><span class="o">::</span><span class="n">current_dir</span><span class="p">()</span>
				<span class="p">.</span><span class="n">ok</span><span class="p">()</span>
				<span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&quot;Can&#39;t get path&quot;</span><span class="p">)</span>
				<span class="p">.</span><span class="n">as_path</span><span class="p">();</span>

    <span class="kd">let</span> <span class="k">mut</span> <span class="n">prevwd</span> <span class="o">=</span> <span class="n">temp</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>

    <span class="c1">//Loop to recieve and execute commands</span>
    <span class="k">loop</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="k">mut</span> <span class="n">command</span> <span class="o">=</span> <span class="n">String</span><span class="o">::</span><span class="n">new</span><span class="p">();</span>
        <span class="n">stdin</span><span class="p">().</span><span class="n">read_line</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span> <span class="n">command</span><span class="p">)</span>
            <span class="p">.</span><span class="n">ok</span><span class="p">()</span>
            <span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&quot;Failure to read input&quot;</span><span class="p">);</span>
        
        <span class="c1">//Super ugly if you know what types are being passed around</span>
        <span class="c1">//below here.It works but I will probably want to clean it up at </span>
        <span class="c1">//some point</span>

        <span class="kd">let</span> <span class="k">mut</span> <span class="n">command_split</span><span class="o">:</span> <span class="n">Vec</span><span class="o">&lt;&amp;</span><span class="kt">str</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">command</span><span class="p">.</span><span class="n">trim</span><span class="p">()</span>
											<span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="sc">&#39; &#39;</span><span class="p">)</span>
											<span class="p">.</span><span class="n">collect</span><span class="p">();</span> 
        <span class="k">match</span> <span class="n">command_split</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="s">&quot;cd&quot;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="n">command_split</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> 
                <span class="n">cd</span><span class="o">::</span><span class="n">change_directory</span><span class="p">(</span><span class="n">command_split</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">prevwd</span><span class="p">);</span>
                <span class="kd">let</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">env</span><span class="o">::</span><span class="n">current_dir</span><span class="p">()]</span>
							<span class="p">.</span><span class="n">ok</span><span class="p">()</span>
							<span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">&quot;Can&#39;t get path&quot;</span><span class="p">)</span>
							<span class="p">.</span><span class="n">as_path</span><span class="p">();</span>
                <span class="n">prevwd</span> <span class="o">=</span> <span class="n">temp</span><span class="p">.</span><span class="n">clone</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nb">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="s">&quot;cat&quot;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                
            <span class="p">}</span>
            <span class="nb">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="s">&quot;&quot;</span><span class="p">)</span>  <span class="o">=&gt;</span> <span class="k">continue</span><span class="p">,</span>
            <span class="nb">Some</span><span class="p">(</span><span class="o">&amp;</span><span class="s">&quot;exit&quot;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">break</span><span class="p">,</span>
            <span class="n">_</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="kd">let</span> <span class="n">output</span> <span class="o">=</span> <span class="n">execute</span><span class="o">::</span><span class="n">interpret</span><span class="p">(</span><span class="n">command_split</span><span class="p">);</span>
                <span class="k">if</span> <span class="n">output</span><span class="p">.</span><span class="n">len</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">{</span>
                    <span class="nb">println</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;{}&quot;</span><span class="p">,</span><span class="n">output</span><span class="p">.</span><span class="n">trim</span><span class="p">());</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span></code></pre></div>

